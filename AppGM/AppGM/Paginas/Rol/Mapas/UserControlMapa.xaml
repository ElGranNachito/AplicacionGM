<local:BaseUserControl x:Class="AppGM.UserControlMapa" x:TypeArguments="core:ViewModelMapa"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:AppGM"
             xmlns:core="clr-namespace:AppGM.Core;assembly=AppGM.Core"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="6*"/>
        </Grid.ColumnDefinitions>

        <StackPanel Background="White"
                    local:AñadirMargenAElementosProperty.Value="{x:Type local:UserControlIngresoPosicion}"
                    local:ParametroThicknessProperty.Parametro="0 5 0 0">

            <local:UserControlIngresoPosicion
                DataContext="{Binding PosicionIglesia}">
                
                <TextBlock Text="Posicion Iglesia" 
                           HorizontalAlignment="Center"/>
                
            </local:UserControlIngresoPosicion>

            <local:UserControlIngresoPosicion
                DataContext="{Binding PosicionIglesia}">

                <TextBlock Text="Posicion Saber" 
                           HorizontalAlignment="Center"/>

            </local:UserControlIngresoPosicion>

            <local:UserControlIngresoPosicion
                DataContext="{Binding PosicionIglesia}">

                <TextBlock Text="Posicion Lancer" 
                           HorizontalAlignment="Center"/>

            </local:UserControlIngresoPosicion>

            <local:UserControlIngresoPosicion
                DataContext="{Binding PosicionIglesia}">

                <TextBlock Text="Posicion Assassin" 
                           HorizontalAlignment="Center"/>

            </local:UserControlIngresoPosicion>

            <local:UserControlIngresoPosicion
                DataContext="{Binding PosicionIglesia}">

                <TextBlock Text="Posicion Rider" 
                           HorizontalAlignment="Center"/>

            </local:UserControlIngresoPosicion>

            <local:UserControlIngresoPosicion
                DataContext="{Binding PosicionIglesia}">

                <TextBlock Text="Posicion Archer" 
                           HorizontalAlignment="Center"/>

            </local:UserControlIngresoPosicion>

            <local:UserControlIngresoPosicion
                DataContext="{Binding PosicionIglesia}">

                <TextBlock Text="Posicion Caster" 
                           HorizontalAlignment="Center"/>

            </local:UserControlIngresoPosicion>

            <local:UserControlIngresoPosicion
                DataContext="{Binding PosicionIglesia}">

                <TextBlock Text="Posicion Berserker" 
                           HorizontalAlignment="Center"/>

            </local:UserControlIngresoPosicion>


        </StackPanel>

        <Border Padding="5" Grid.Column="1" Background="White">

            <Grid>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="0"/>
                    <TextBlock Text="{Binding MitadTamañoCanvasY, Mode=OneWay}" Grid.Row="1" Grid.RowSpan="2" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding TamañoCanvasY, Mode=OneWay}" Grid.Row="2"/>
                </Grid>

                <Grid Grid.Column="1">

                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Grid>

                        <TextBlock Text="{Binding MitadTamañoCanvasX}" 
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="{Binding TamañoCanvasX}"
                                   HorizontalAlignment="Right"/>

                    </Grid>

                    <Grid Grid.Row="1">

                    <ScrollViewer 
                        VerticalScrollBarVisibility="Visible"
                        HorizontalScrollBarVisibility="Visible">

                        <Canvas  
                            SizeChanged="OnMapaSizeXChanged"
                                 Width="{Binding ElementName=mapa, Path=ActualWidth}"
                                 Height="{Binding ElementName=mapa, Path=ActualHeight}">

                            <Image x:Name="mapa" Source="{Binding PathAImagen}"/>

                            <Image
                                Source="../../../Media/Imagenes/Carta_Servant.png" 
                                Width="{Binding TamañoImagenesPosicion.X, Mode=OneWay}" 
                                Height="{Binding TamañoImagenesPosicion.Y, Mode=OneWay}"
                                RenderTransformOrigin="0.5, 0.5"
                                Canvas.Left="{Binding PosicionIglesia.Posicion.X, Mode=OneWay}"
                                Canvas.Top="{Binding PosicionIglesia.Posicion.Y, Mode=OneWay}"
                                >
                                <Image.RenderTransform>
                                        <TranslateTransform 
                                            X="{Binding MitadTamañoImagenesPosicion.X, Mode=OneWay}"
                                            Y="{Binding MitadTamañoImagenesPosicion.Y, Mode=OneWay}"/>
                                </Image.RenderTransform>
                            </Image>

                        </Canvas>

                    </ScrollViewer>
                </Grid>

                </Grid>

            </Grid>

        </Border>
            
    </Grid>
</local:BaseUserControl>
